<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="NZ, MG">
<meta name="dcterms.date" content="2025-07-28">
<meta name="description" content="How to use Neurodesktop on the server">

<title>Neurodesktop access – Visual Neuroscience Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-3f2066268bf2160d7f3b2c3b88ce6999.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Visual Neuroscience Lab</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../neurodesk/neurodesktop.html"> 
<span class="menu-text">Neurodesktop</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../behavioral.html"> 
<span class="menu-text">Behavioral</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../labmeeting.html"> 
<span class="menu-text">Labmeeting</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../dicom_to_glm.html"> 
<span class="menu-text">DICOM to GLM</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../mri.html"> 
<span class="menu-text">MRI</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../people.html"> 
<span class="menu-text">People</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../internship.html"> 
<span class="menu-text">Internship</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../other_topics.html"> 
<span class="menu-text">Other Topics</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../archive.html"> 
<span class="menu-text">Archive</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../neurodesk/neurodesktop.html">Neurodesktop</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../neurodesk/neurodesktop.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Neurodesktop</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../dicom_to_glm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MRI: from DICOM to GLM Analysis</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/Overview_fromDICOMtoGLM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00 - Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/DICOMtoBIDS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01 - DICOM to BIDS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/check_IntendedFor_field.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02 - Check IntendedFor field of the fmap’s JSON</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/ProvidingParticipantsWithTheirT1wFile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03 - T1w for PBn</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/defacing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04 - Defacing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/RemoveNoiseScan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05 - Removing Noise Scan</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/run_fmriprep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">06 - fMRIprep</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/retinotopic_mapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">07 - Retinotopic Mapping</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/first_level_glm_nilearn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">08 - first level GLM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/second_level_glm_nilearn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">09- second level GLM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dicom_to_glm/troubleshooting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Troubleshooting</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../mri.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MRI</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mri/MRI-Studies_general/mri-studies_general-information.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MRI-Studies: General Information</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mri/3D-prints/3d-prints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3D printing a brain</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mri/analysis/7t_analysis_on_neurodesk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7T anatomical analysis on neurodesk</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mri/analysis/bids.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MRI BIDS and OSF</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mri/analysis/fmriprep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">fMRIprep analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mri/mni-space/mni-space.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MNI space</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mri/mri-lab-setup-2023/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Old MRI setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mri/mri-lab-setup-2024/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Update to the MRI lab setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mri/physiology/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Physiological noise correction</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../behavioral.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Behavioral</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../behavioral/2024-05-22/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vision tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../behavioral/2024-05-23/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BIDS for behavioral studies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../behavioral/chinrests/chinrests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Custom-built chin rests</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../people.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">People</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../people/stipends/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stipends and prizes for master students</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../people/coffee/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Coffee time</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../people/compensation/compensation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Participant compensation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../people/leaving/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Things to do if you are leaving the lab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../people/writing/writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Scientific writing in practice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../people/funding/funding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">project funding opportunities</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../internship.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Internship</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../internship/pflichtpraktikum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pflichtpraktikum</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../internship/checklist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Internship Checklist</span></a>
  </div>
</li>
          <li class="sidebar-item">
 <span class="menu-text">internship/claustrum_segmentation.qmd</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../other_topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other Topics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../OtherTopics/CalculatingAPrioriPower.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Calculating a priori sample size using G Power</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../OtherTopics/displays/displays.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gamma correction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../OtherTopics/ContributeWithR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contribute to the website</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../OtherTopics/LabMembersOnly/LabMembersOnly.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Older ways to access the server</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labmeeting/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Labmeeting</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../archive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Archive</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#general-information" id="toc-general-information" class="nav-link active" data-scroll-target="#general-information">General information</a>
  <ul class="collapse">
  <li><a href="#access" id="toc-access" class="nav-link" data-scroll-target="#access">Access</a>
  <ul class="collapse">
  <li><a href="#employees" id="toc-employees" class="nav-link" data-scroll-target="#employees">Employees</a></li>
  <li><a href="#non-employees-students-and-interns" id="toc-non-employees-students-and-interns" class="nav-link" data-scroll-target="#non-employees-students-and-interns">Non-employees (students and interns)</a></li>
  </ul></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a></li>
  </ul></li>
  <li><a href="#getting-an-account" id="toc-getting-an-account" class="nav-link" data-scroll-target="#getting-an-account">Getting an account</a></li>
  <li><a href="#using-neurodesk" id="toc-using-neurodesk" class="nav-link" data-scroll-target="#using-neurodesk">Using Neurodesk</a>
  <ul class="collapse">
  <li><a href="#first-usage" id="toc-first-usage" class="nav-link" data-scroll-target="#first-usage">First usage</a></li>
  <li><a href="#storing-data" id="toc-storing-data" class="nav-link" data-scroll-target="#storing-data">Storing data</a></li>
  <li><a href="#sharing-data" id="toc-sharing-data" class="nav-link" data-scroll-target="#sharing-data">Sharing data</a></li>
  <li><a href="#data-transfer" id="toc-data-transfer" class="nav-link" data-scroll-target="#data-transfer">Data transfer</a></li>
  <li><a href="#software" id="toc-software" class="nav-link" data-scroll-target="#software">Software</a>
  <ul class="collapse">
  <li><a href="#using-freesurfer" id="toc-using-freesurfer" class="nav-link" data-scroll-target="#using-freesurfer">Using FreeSurfer</a></li>
  <li><a href="#using-fitlins" id="toc-using-fitlins" class="nav-link" data-scroll-target="#using-fitlins">Using fitlins</a></li>
  <li><a href="#other-docker-based-software" id="toc-other-docker-based-software" class="nav-link" data-scroll-target="#other-docker-based-software">Other docker-based software</a></li>
  </ul></li>
  <li><a href="#resource-esp.-ram-usage" id="toc-resource-esp.-ram-usage" class="nav-link" data-scroll-target="#resource-esp.-ram-usage">Resource (esp.&nbsp;RAM) usage</a></li>
  <li><a href="#using-notebooks-and-scripts-in-jupyterlab" id="toc-using-notebooks-and-scripts-in-jupyterlab" class="nav-link" data-scroll-target="#using-notebooks-and-scripts-in-jupyterlab">Using notebooks and scripts in JupyterLab</a></li>
  </ul></li>
  <li><a href="#information-for-lab-members-with-ssh-access" id="toc-information-for-lab-members-with-ssh-access" class="nav-link" data-scroll-target="#information-for-lab-members-with-ssh-access">Information for lab members with ssh access</a>
  <ul class="collapse">
  <li><a href="#folder-mappings" id="toc-folder-mappings" class="nav-link" data-scroll-target="#folder-mappings">Folder mappings:</a></li>
  <li><a href="#for-interfacing-with-the-folders-on-storage" id="toc-for-interfacing-with-the-folders-on-storage" class="nav-link" data-scroll-target="#for-interfacing-with-the-folders-on-storage">For interfacing with the folders on storage</a></li>
  <li><a href="#mount-network-shares" id="toc-mount-network-shares" class="nav-link" data-scroll-target="#mount-network-shares">Mount network shares</a></li>
  <li><a href="#checking-resource-usage-directly-on-the-server" id="toc-checking-resource-usage-directly-on-the-server" class="nav-link" data-scroll-target="#checking-resource-usage-directly-on-the-server">Checking resource usage directly on the server</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Neurodesktop access</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Neurodesk</div>
  </div>
  </div>

<div>
  <div class="description">
    How to use Neurodesktop on the server
  </div>
</div>


<div class="quarto-title-meta column-body">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>NZ, MG </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 28, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="general-information" class="level1">
<h1>General information</h1>
<p>Neurodesktop is a Linux environment specifically developed for open and reproducible neuroimaging. For details, see <a href="https://www.neurodesk.org" class="uri">https://www.neurodesk.org</a></p>
<p>This page provides information and instructions on how to use neurodesktop on our lab’s server.</p>
<section id="access" class="level2">
<h2 class="anchored" data-anchor-id="access">Access</h2>
<section id="employees" class="level3">
<h3 class="anchored" data-anchor-id="employees">Employees</h3>
<p>Office computers and VPN with an employee account</p>
</section>
<section id="non-employees-students-and-interns" class="level3">
<h3 class="anchored" data-anchor-id="non-employees-students-and-interns">Non-employees (students and interns)</h3>
<ul>
<li><p>Office computers</p></li>
<li><p>Student PC room</p></li>
</ul>
</section>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<p>Each neurodesktop user is limited to 256GB RAM&nbsp;out of 504GB and to 20 out of 32 CPU cores.</p>
</section>
</section>
<section id="getting-an-account" class="level1">
<h1>Getting an account</h1>
<ol type="1">
<li><p>Use a computer with server access (described in <a href="#access">Access</a> section)</p></li>
<li><p>Open a browser and type <a href="https://pslg-nv1.uni-graz.at/">https://pslg-nv1.uni-graz.at</a></p></li>
<li><p>Select “sign up”</p>
<p><img src="images/clipboard-777788509.png" class="img-fluid"></p></li>
<li><p>Fill out the following fields</p>
<ul>
<li><p>Username: first part of your univesity email account before “@”, e.g.&nbsp;jane.doe if your email address is jane.doe@edu.uni-graz.at</p></li>
<li><p>Email: your university student or employee email address (if you are a course participant: university student email address)</p></li>
<li><p>Password of your choice</p></li>
</ul>
<p><img src="images/clipboard-3276311981.png" class="img-fluid"></p></li>
<li><p>After you sign up, your account needs to be authorized by the technical staff. This may take a few days. If there is no progress, please check back with us.</p></li>
<li><p>Once your account is authorized, you should be able to log in with your credentials (you won’t get a any special notifications, so please just check regularly)</p></li>
</ol>
</section>
<section id="using-neurodesk" class="level1">
<h1>Using Neurodesk</h1>
<p>Once your account has been authorized</p>
<ol type="1">
<li><p>Open a browser and type <a href="https://pslg-nv1.uni-graz.at/">https://pslg-nv1.uni-graz.at</a></p></li>
<li><p>Sing in with your credentials</p></li>
<li><p>You will see a JupyterLab session. In neurodesk everyone becomes a linux user “jovyan”. Your home directory <code>/home/jovyan</code> will appear on the left handide</p></li>
<li><p>You can use the terminal or jupyter notebook directly in the browser by clicking the corresponding icons</p></li>
<li><p>If you would like to use graphical interface, you can start the neuroDESKTOP by clicking on the icon.</p>
<p><img src="images/clipboard-3175354375.png" class="img-fluid" width="406"></p></li>
<li><p>You should see the desktop with all the apps:</p>
<p><img src="images/clipboard-3609792068.png" class="img-fluid" width="400"></p></li>
<li><p>If you close this window and reopen it later, all your work will be saved as you left it (unless the server has been restarted in the meantime, which happens every Tuesday)</p></li>
</ol>
<p>You can use <a href="https://pslg-nv1.uni-graz.at/hub/home" class="uri">https://pslg-nv1.uni-graz.at/hub/home</a> to control your container (start/stop) or change your password. You can also reach the hub home by choosing File -&gt; Hub Control Panel from the menue.</p>
<p><img src="images/clipboard-2628836406.png" class="img-fluid"></p>
<section id="first-usage" class="level2">
<h2 class="anchored" data-anchor-id="first-usage">First usage</h2>
<p>The first time you start the neurodesk or a specific neurodesktop application, it may take a while until it opens. Be patient! This is because the first time everything gets downloaded in the background. It will be much faster when you perform the same operations repeatedly (until the next server reboot).</p>
</section>
<section id="storing-data" class="level2">
<h2 class="anchored" data-anchor-id="storing-data">Storing data</h2>
<p>If working via neurodesk, you SHOULD store data in your home directory. This data is kept after server restart and is backed up.</p>
</section>
<section id="sharing-data" class="level2">
<h2 class="anchored" data-anchor-id="sharing-data">Sharing data</h2>
<p>All neurodesk users have read and write permissions to <code>/shared</code> neurodesktop folder, which should be used to store things used by everyone (like atlases, software, shared data)</p>
</section>
<section id="data-transfer" class="level2">
<h2 class="anchored" data-anchor-id="data-transfer">Data transfer</h2>
<p>There are currently two alternatives</p>
<ol type="1">
<li><p>You can transfer the data via nextcloud client, which is included in neurodsktop</p>
<p><img src="images/clipboard-3813941447.png" class="img-fluid" width="400"></p></li>
<li><p>“file upload” button at the top of the jupyter lab menu (up-pointing arrow) or download by right-clicking on the relevant files. This option does not currently support multiple files, so if you want to transfer many files at once this way, it is advisable to zip them.</p>
<p><img src="images/clipboard-1030227267.png" class="img-fluid"></p></li>
</ol>
</section>
<section id="software" class="level2">
<h2 class="anchored" data-anchor-id="software">Software</h2>
<section id="using-freesurfer" class="level3">
<h3 class="anchored" data-anchor-id="using-freesurfer">Using FreeSurfer</h3>
<p>To force freesurfer/freeview to see the /storage folder, source freesurfer from the terminal as follows</p>
<pre><code>ml freesurfer/7.4.1
cd /storage
freeview</code></pre>
<p>To set up custom subject directory in a container, use the following (instead of export SUBJECTS_DIR=)</p>
<pre><code>export SINGULARITYENV_SUBJECTS_DIR=[yourpath] export APPTAINERENV_SUBJECTS_DIR=[yourpath]</code></pre>
</section>
<section id="using-fitlins" class="level3">
<h3 class="anchored" data-anchor-id="using-fitlins">Using fitlins</h3>
<p>Note that fitlins is currently not recommended; we switched to using nilearn to fit the GLM. See the <a href="dicom_to_glm.qmd">“DICOM to GLM”</a> pipeline for details</p>
<p>Using FitLins (not a part of neurodesktop basic set of tools) with Singularity:</p>
<p><br>
<code>singularity run /shared/poldracklab_fitlins_latest-2022-10-17-32670dc66bf7.simg</code> [your fitlins commands]</p>
<p>Please note that we are abandoning fitlins usage and are switching to <a href="https://nilearn.github.io/stable/index.html">nilearn</a> for GLM analysis</p>
</section>
<section id="other-docker-based-software" class="level3">
<h3 class="anchored" data-anchor-id="other-docker-based-software">Other docker-based software</h3>
<p>If you would like to use some other software package that is not directly available through neruodesk, but is distributed as docker; you can use it by building a singularity image in the shared folder (so that it is available for everyone), e.g.:</p>
<p><code>singularity build /shared/singularity/deepprep/deepprep-25.1.0.simg docker://pbfslab/deepprep:25.1.0</code></p>
<p>and then run it as above:</p>
<p><code>singularity run --cleanenv /shared/singularity/deepprep/deepprep-25.1.0.simg</code></p>
</section>
</section>
<section id="resource-esp.-ram-usage" class="level2">
<h2 class="anchored" data-anchor-id="resource-esp.-ram-usage">Resource (esp.&nbsp;RAM) usage</h2>
<p>Please keep an eye on your resource usage, especially RAM. If too much RAM is used up by users, the server will be slow and eventually unusable.</p>
<p>The overall resource usage on the server (all users) is displayed in the bottom left of the neurodesktop interface as blue and red bars:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-211162115.png" class="img-fluid figure-img"></p>
<figcaption>Example of about 50% RAM usage</figcaption>
</figure>
</div>
<p>If you want to check how much resources is used by you, open the terminal and type “htop” (you can use F6 to sort processes by “percentage memory”):</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-170336543.png" class="img-fluid figure-img"></p>
<figcaption>Example of “normal” memory usage for running fMRIprep.</figcaption>
</figure>
</div>
</section>
<section id="using-notebooks-and-scripts-in-jupyterlab" class="level2">
<h2 class="anchored" data-anchor-id="using-notebooks-and-scripts-in-jupyterlab">Using notebooks and scripts in JupyterLab</h2>
<p>When you want to use python scrips or notebooks, you´ll probably set them up in JupyterLab. There are a few “nice-to-have” (e.g.&nbsp;changing the Theme at the section <code>Settings</code> at the menu bar) but also potentially crucial settings that are worth taking a look at:</p>
<ul>
<li><p><code>Settings &gt; Settings Editor</code></p>
<ol type="a">
<li>at the sidebar, go to <code>Notebook</code>. Here you have the option to individualize different aspects about your notebooks. Two potentially important/helpful adaptations:
<ol type="1">
<li>Enable “Auto Closing Brackets” (should be right at the top). When handling multiple brackets, this might be helpful to keep track of where you are.</li>
<li>If you scroll down a bit, there should be “Shut down kernel”. Even though unused kernels are shut down after 24h automatically, it might be a good practice to enable this option. This results in an automatic kernel-shutdown whenever you close a notebook. This helps to keep the RAM clean by avoiding active kernels that are not used.</li>
</ol></li>
<li>at the sidebar, go to <code>Code Completion</code>. Depending what you are used to when coding, you can activate the option <code>Enable autocompletion</code> here</li>
</ol></li>
<li><p>The ⏩ sign: <span class="math inline">\(\to\)</span> by clicking this button at the top of notebooks, it will restart the kernel and run the whole notebook sequentially (so all cells after each other)</p></li>
<li><p>The ⏵ sign: run the current cell (Alternative: <code>Strg</code> + <code>Enter</code>)</p></li>
<li><p>The ⏹ sign: interrups all current processes of the kernel</p></li>
<li><p>The ⟳ sign: restarts the kernel (<em>all</em> variales are lost, everything is cleared from RAM)</p></li>
<li><p>Ensuring limited strain on RAM for notebooks with high RAM demands: Sometimes you need to run notebooks that take some time and that require much RAM (e.g.&nbsp;analysis/processing with surface images of multiple subjects). First, you should figure out how many subjects are even possible at once (due to limited RAM). If you run a notebook that takes so much time that you potentially can´t look at the data immediately (as it may take an hour an you are not in the office then), it can be useful to add cell at the very end of your notebook with <code>os._exit(0)</code> (if you dodn´t use <code>os</code> in your notebook, you have to include <code>import os</code> before that line as well). Including this line and with using ⏩, your notebook runs through completely and automatically aborts the kernel afterwards. Thus, you free up the required RAM immediately after your notebook finished (obviously, you must make sure that the data you need is saved in the process)</p></li>
</ul>
</section>
</section>
<section id="information-for-lab-members-with-ssh-access" class="level1">
<h1>Information for lab members with ssh access</h1>
<section id="folder-mappings" class="level2">
<h2 class="anchored" data-anchor-id="folder-mappings">Folder mappings:</h2>
<p>(left is server right is neurodesk)<br>
<code>/storage -&gt; /storage</code><br>
<code>/storage/neurodesk/shared -&gt; /shared</code><br>
<code>/storage/neurodesk/users/{username} -&gt; /home/jovyan</code></p>
<p>Only these three folders are persistent.</p>
</section>
<section id="for-interfacing-with-the-folders-on-storage" class="level2">
<h2 class="anchored" data-anchor-id="for-interfacing-with-the-folders-on-storage">For interfacing with the folders on storage</h2>
<p>You can create symbolic links in your home directory:</p>
<p><code>ln -s /storage/ /home/jovyan/storage</code></p>
</section>
<section id="mount-network-shares" class="level2">
<h2 class="anchored" data-anchor-id="mount-network-shares">Mount network shares</h2>
<p>You can mount network shares with Lukas’ helper script at <code>/shared/mount_network_share.sh</code> (i.e.&nbsp;you´ll see a directory through which you can access the network from within neurodesk)</p>
<ol type="1">
<li><p>Usage: <code>/shared/mount_network_share.sh &lt;mount_point&gt; &lt;share_choice|full_share_path&gt;</code></p></li>
<li><p>Share choices</p>
<ul>
<li>J <span class="math inline">\(\to\)</span> mounts <code>//pslg067044.pers.ad.uni-graz.at/Allgemeine</code></li>
<li>Y <span class="math inline">\(\to\)</span> mounts <code>//pers.ad.uni-graz.at/fs/ou/602</code></li>
<li>Any other value <span class="math inline">\(\to\)</span> treated as a full UNC path (e.g.&nbsp;<code>//server/share/path</code>)</li>
</ul></li>
<li><p>Examples:</p>
<ul>
<li><code>/shared/mount_network_share.sh /home/jovyan/allg_j J</code><br><span class="math inline">\(\to\)</span> mounts the J network to <code>/home/jovyan/allg_j</code> (i.e.&nbsp;there will be a directory <code>allg_j</code> within your <code>/home/jovyan/</code> directory that accesses the J network)</li>
<li><code>shared/mount_network_share.sh /home/jovyan/allg_y Y</code><br><span class="math inline">\(\to\)</span> mounts the Y network to <code>/home/jovyan/allg_y</code> (i.e.&nbsp;there will be a directory <code>allg_y</code> within your <code>/home/jovyan/</code> directory that accesses the Y network)</li>
</ul></li>
</ol>
</section>
<section id="checking-resource-usage-directly-on-the-server" class="level2">
<h2 class="anchored" data-anchor-id="checking-resource-usage-directly-on-the-server">Checking resource usage directly on the server</h2>
<ul>
<li>resource usage per neurodesk container</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> stats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>per user and process</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">htop</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(all student containers are assigned to one user “allg_user”)</p>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/visualneuroscience">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>